function _defineProperties(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,o,e){return o&&_defineProperties(t.prototype,o),e&&_defineProperties(t,e),t}function _inherits(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&_setPrototypeOf(t,o)}function _setPrototypeOf(t,o){return(_setPrototypeOf=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}function _createSuper(t){var o=_isNativeReflectConstruct();return function(){var e,n=_getPrototypeOf(t);if(o){var r=_getPrototypeOf(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(t,o){return!o||"object"!=typeof o&&"function"!=typeof o?_assertThisInitialized(t):o}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"4zk1":function(t,o,e){"use strict";e.d(o,"a",(function(){return u}));var n=e("2kYt"),r=e("PCNd"),c=e("sN6X"),i=e("8bSv"),a=e("ycWL"),s=e("EM62"),u=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=s.Lb({type:t}),t.\u0275inj=s.Kb({factory:function(o){return new(o||t)},imports:[[c.j.forFeature("feed",i.b.reducer),a.b.forFeature([i.a]),r.a,n.c]]}),t}()},"dLA+":function(t,o,e){"use strict";e.d(o,"a",(function(){return j}));var n=e("EM62"),r=e("W8dB"),c=e("8bSv"),i=e("sN6X"),a=e("kYBX"),s=e("VIHj"),u=e("nIj0"),b=e("h9PC"),f=e("Meci"),p=e("2kYt"),m=e("PBFl"),h=e("bFHC"),l=e("S17y"),d=e("29Wa"),v=e("Cd2c");function S(t,o){if(1&t&&(n.Tb(0,"div",17),n.Ob(1,"img",18),n.Sb()),2&t){var e=n.fc();n.Bb(1),n.kc("src",e.photo.user.profileImgUrl,n.sc)}}function g(t,o){if(1&t&&(n.Tb(0,"div",17),n.Ob(1,"img",18),n.Sb()),2&t){var e=n.fc();n.Bb(1),n.kc("src",e.defaultPicturePath,n.sc)}}function y(t,o){if(1&t){var e=n.Ub();n.Tb(0,"span"),n.Tb(1,"button",19),n.bc("click",(function(){return n.rc(e),n.fc().toggleFavorite()})),n.Tb(2,"mat-icon"),n.yc(3,"favorite"),n.Sb(),n.yc(4,"Unfavorite "),n.Sb(),n.Sb()}}function C(t,o){if(1&t){var e=n.Ub();n.Tb(0,"span"),n.Tb(1,"button",19),n.bc("click",(function(){return n.rc(e),n.fc().toggleFavorite()})),n.Tb(2,"mat-icon"),n.yc(3,"favorite_border"),n.Sb(),n.yc(4,"Favorite "),n.Sb(),n.Sb()}}function T(t,o){if(1&t&&(n.Tb(0,"span"),n.Tb(1,"mat-chip"),n.yc(2),n.Sb(),n.Sb()),2&t){var e=o.$implicit;n.Bb(2),n.zc(e.content)}}function k(t,o){if(1&t&&(n.Tb(0,"div",0),n.Tb(1,"div",20),n.Tb(2,"mat-form-field"),n.Tb(3,"mat-label"),n.yc(4,"Add a comment"),n.Sb(),n.Ob(5,"textarea",21),n.Sb(),n.Sb(),n.Tb(6,"div",22),n.Tb(7,"button",23),n.Tb(8,"mat-icon"),n.yc(9,"send"),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&t){var e=n.fc();n.Bb(5),n.kc("formControl",e.form.get("content"))}}function w(t,o){if(1&t){var e=n.Ub();n.Tb(0,"span"),n.Tb(1,"button",28),n.bc("click",(function(){n.rc(e);var t=n.fc().$implicit,o=n.fc(2);return o.changeCommentStatus(t.id,o.approvedStatus)})),n.Tb(2,"mat-icon"),n.yc(3,"check"),n.Sb(),n.Sb(),n.Tb(4,"button",28),n.bc("click",(function(){n.rc(e);var t=n.fc().$implicit,o=n.fc(2);return o.changeCommentStatus(t.id,o.rejectedStatus)})),n.Tb(5,"mat-icon"),n.yc(6,"cancel"),n.Sb(),n.Sb(),n.Sb()}}function _(t,o){if(1&t&&(n.Tb(0,"div",26),n.Tb(1,"div",27),n.Tb(2,"strong"),n.yc(3),n.Sb(),n.yc(4),n.xc(5,w,7,0,"span",9),n.Sb(),n.Sb()),2&t){var e=o.$implicit,r=n.fc(2);n.Bb(3),n.Ac("",null==e?null:e.username," "),n.Bb(1),n.Ac(" ",e.content," "),n.Bb(1),n.kc("ngIf",r.photo.user.id===r.user.id&&e.status===r.pendingStatus)}}function P(t,o){if(1&t&&(n.Tb(0,"mat-card-footer"),n.Tb(1,"h6",24),n.yc(2,"Comments"),n.Sb(),n.xc(3,_,6,3,"div",25),n.Sb()),2&t){var e=n.fc();n.Bb(3),n.kc("ngForOf",e.photo.comments)}}var O,B,F=((B=function(t){_inherits(e,t);var o=_createSuper(e);function e(t,r){var c;return _classCallCheck(this,e),(c=o.call(this,t)).formService=t,c.fb=r,c.updateCommentStatus=new n.n,c.updatePhotoFavorite=new n.n,c.defaultPicturePath="assets/img/blank-profile.png",c.showComment=!1,c.showComments=!1,c.pendingStatus=a.a.pending,c.approvedStatus=a.a.approved,c.rejectedStatus=a.a.rejected,c.form=c.fb.group({photoId:[null,u.o.required],content:[null,u.o.required]}),c}return _createClass(e,[{key:"ngOnChanges",value:function(t){var o=this;t.photo&&this.photo&&this.photo.comments&&(this.photo=Object.assign(Object.assign({},this.photo),{comments:this.photo.comments.filter((function(t){if(t.status===o.approvedStatus||t.status===o.pendingStatus&&o.photo.user.id===o.user.id)return t}))}))}},{key:"changeShowComment",value:function(){this.showComment=!this.showComment}},{key:"changeShowComments",value:function(){this.showComments=!this.showComments}},{key:"changeCommentStatus",value:function(t,o){var e;this.photo=Object.assign(Object.assign({},this.photo),{comments:this.photo.comments.map((function(n){return n.id===t?(n=Object.assign(Object.assign({},n),{status:o}),e=n.photoId,n):n}))}),this.updateCommentStatus.emit({id:t,status:o,photoId:e})}},{key:"toggleFavorite",value:function(){this.photo.favorite=!this.photo.favorite,this.updatePhotoFavorite.emit(this.photo.id)}},{key:"onSubmit",value:function(){this.form.get("photoId").patchValue(this.photo.id),this.submit()}}]),e}(b.a)).\u0275fac=function(t){return new(t||B)(n.Nb(s.a),n.Nb(u.c))},B.\u0275cmp=n.Hb({type:B,selectors:[["napho-photo-post"]],inputs:{photo:"photo",user:"user"},outputs:{updateCommentStatus:"updateCommentStatus",updatePhotoFavorite:"updatePhotoFavorite"},features:[n.yb,n.zb],decls:36,vars:13,consts:[[1,"row"],[1,"col"],["class","col-2",4,"ngIf"],[1,"ml-3","col-6"],[1,"mt-2"],[1,"border","text-center"],["alt","Photo Post",1,"img-fluid",3,"src"],[1,"border","row","mt-1"],[1,"col-lg-3","col-6"],[4,"ngIf"],["mat-button","",3,"click"],[1,"row","mt-1"],[3,"click"],[4,"ngFor","ngForOf"],[1,"mt-1"],[3,"formGroup","ngSubmit"],["class","row",4,"ngIf"],[1,"col-2"],["alt","Profile image",1,"profile",3,"src"],["mat-button","","color","primary",3,"click"],[1,"col-11"],["matInput","",3,"formControl"],[1,"col-1"],["mat-icon-button","","type","submit"],[1,"m-0"],["class","row m-0",4,"ngFor","ngForOf"],[1,"row","m-0"],[1,"col","p-0"],["mat-icon-button","",3,"click"]],template:function(t,o){1&t&&(n.Tb(0,"div",0),n.Tb(1,"div",1),n.Tb(2,"mat-card"),n.Tb(3,"mat-card-header"),n.Tb(4,"div",0),n.xc(5,S,2,1,"div",2),n.xc(6,g,2,1,"div",2),n.Tb(7,"div",3),n.Tb(8,"h3"),n.yc(9),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(10,"mat-card-content",4),n.Tb(11,"div",5),n.Ob(12,"img",6),n.Sb(),n.Tb(13,"div",7),n.Tb(14,"div",8),n.xc(15,y,5,0,"span",9),n.xc(16,C,5,0,"span",9),n.Sb(),n.Tb(17,"div",8),n.Tb(18,"button",10),n.bc("click",(function(){return o.changeShowComment()})),n.Tb(19,"mat-icon"),n.yc(20,"comment"),n.Sb(),n.yc(21," Comment "),n.Sb(),n.Sb(),n.Sb(),n.Tb(22,"div",11),n.Tb(23,"div",8),n.Tb(24,"div"),n.yc(25),n.Sb(),n.Sb(),n.Tb(26,"div",8),n.Tb(27,"div",12),n.bc("click",(function(){return o.changeShowComments()})),n.yc(28),n.Sb(),n.Sb(),n.Sb(),n.Tb(29,"mat-chip-list",4),n.xc(30,T,3,1,"span",13),n.Sb(),n.Tb(31,"div",14),n.yc(32),n.Sb(),n.Tb(33,"form",15),n.bc("ngSubmit",(function(){return o.onSubmit()})),n.xc(34,k,10,1,"div",16),n.Sb(),n.Sb(),n.xc(35,P,4,1,"mat-card-footer",9),n.Sb(),n.Sb(),n.Sb()),2&t&&(n.Bb(5),n.kc("ngIf",o.photo.user.profileImgUrl),n.Bb(1),n.kc("ngIf",!o.photo.user.profileImgUrl),n.Bb(3),n.zc(o.photo.user.username),n.Bb(3),n.kc("src",o.photo.imageUrl,n.sc),n.Bb(3),n.kc("ngIf",o.photo.favorite),n.Bb(1),n.kc("ngIf",!o.photo.favorite),n.Bb(9),n.Ac(" ",null==o.photo.favoriteOf?null:o.photo.favoriteOf.length," Favs "),n.Bb(3),n.Ac(" ",null==o.photo.comments?null:o.photo.comments.length," Comments "),n.Bb(2),n.kc("ngForOf",o.photo.tags),n.Bb(2),n.Ac(" ",o.photo.description," "),n.Bb(1),n.kc("formGroup",o.form),n.Bb(1),n.kc("ngIf",o.showComment),n.Bb(1),n.kc("ngIf",o.showComments))},directives:[f.a,f.d,p.k,f.b,m.a,h.a,l.c,p.j,u.p,u.k,u.e,l.a,d.b,d.e,v.b,u.b,u.j,u.d,f.c],styles:[".profile[_ngcontent-%COMP%]{border-radius:50%!important;min-width:auto!important;height:30px;width:30px;border:2px solid #44443b;border-radius:50%}"]}),B),j=((O=function(){function t(o){_classCallCheck(this,t),this.store=o,this.createComment=new n.n,this.user$=this.store.select(r.c)}return _createClass(t,[{key:"updateCommentStatus",value:function(t){this.store.dispatch(c.b.actions.updateCommentStatus({comment:t}))}},{key:"updatePhotoFavorite",value:function(t){this.store.dispatch(c.b.actions.updatePhotoFavorite({id:t}))}}]),t}()).\u0275fac=function(t){return new(t||O)(n.Nb(i.h))},O.\u0275cmp=n.Hb({type:O,selectors:[["napho-photo-post-container"]],inputs:{photo:"photo"},outputs:{createComment:"createComment"},decls:2,vars:4,consts:[[3,"photo","user","updateCommentStatus","updatePhotoFavorite","formSubmit"]],template:function(t,o){1&t&&(n.Tb(0,"napho-photo-post",0),n.bc("updateCommentStatus",(function(t){return o.updateCommentStatus(t)}))("updatePhotoFavorite",(function(t){return o.updatePhotoFavorite(t)}))("formSubmit",(function(t){return o.createComment.emit(t)})),n.gc(1,"async"),n.Sb()),2&t&&n.kc("photo",o.photo)("user",n.hc(1,2,o.user$))},directives:[F],pipes:[p.b],styles:[""]}),O)}}]);