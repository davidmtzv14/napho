(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{xQww:function(t,e,o){"use strict";o.r(e),o.d(e,"FeedModule",(function(){return J}));var c=o("2kYt"),r=o("PCNd"),s=o("sEIs"),n=o("8bSv"),i=o("EM62"),a=o("sN6X"),b=o("fAiE"),l=o("h9PC"),m=o("VIHj"),u=o("nIj0"),h=(o("kYBX"),o("Meci")),p=o("29Wa"),f=o("Cd2c"),d=o("S17y"),v=o("PBFl"),g=o("bFHC"),S=o("dLA+");function T(t,e){1&t&&(i.Tb(0,"mat-icon",20),i.yc(1,"cancel"),i.Sb())}function C(t,e){if(1&t){const t=i.Ub();i.Tb(0,"mat-chip",18),i.bc("removed",(function(){i.rc(t);const o=e.$implicit;return i.fc().remove(o)})),i.yc(1),i.xc(2,T,2,0,"mat-icon",19),i.Sb()}if(2&t){const t=e.$implicit,o=i.fc();i.kc("selectable",o.selectable)("removable",o.removable),i.Bb(1),i.Ac(" ",t," "),i.Bb(1),i.kc("ngIf",o.removable)}}function y(t,e){if(1&t&&(i.Tb(0,"div",21),i.Ob(1,"img",22),i.Sb()),2&t){const t=i.fc();i.Bb(1),i.kc("src",t.previewUrl,i.sc)}}function w(t,e){if(1&t){const t=i.Ub();i.Tb(0,"div"),i.Tb(1,"napho-photo-post-container",23),i.bc("createComment",(function(e){return i.rc(t),i.fc().createComment.emit(e)})),i.Sb(),i.Sb()}if(2&t){const t=e.$implicit;i.Bb(1),i.kc("photo",t)}}let k=(()=>{class t extends l.a{constructor(t,e){super(t),this.formService=t,this.fb=e,this.createComment=new i.n,this.fileData=null,this.previewUrl=null,this.fileUploadProgress=null,this.uploadedFilePath=null,this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[b.g,b.c],this.tags=[],this.form=this.fb.group({description:[null],tags:[null],imageUrl:[null,u.o.required]})}add(t){const e=t.input,o=t.value;(o||"").trim()&&this.tags.push(o.trim()),e&&(e.value="")}remove(t){const e=this.tags.indexOf(t);e>=0&&this.tags.splice(e,1)}fileProgress(t){this.fileData=t.target.files[0],this.preview()}preview(){if(null==this.fileData.type.match(/image\/*/))return;const t=new FileReader;t.readAsDataURL(this.fileData),t.onload=e=>{this.form.get("imageUrl").patchValue(t.result),this.previewUrl=t.result}}onSubmit(){this.form.get("tags").patchValue(this.tags),this.submit()}}return t.\u0275fac=function(e){return new(e||t)(i.Nb(m.a),i.Nb(u.c))},t.\u0275cmp=i.Hb({type:t,selectors:[["napho-home"]],inputs:{photos:"photos"},outputs:{createComment:"createComment"},features:[i.yb],decls:33,vars:8,consts:[[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],["matInput","",3,"formControl"],["aria-label","Tags"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Add tags...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[1,"custom-file"],["type","file","name","image","accept","image/*","id","newPost",1,"custom-file-input",3,"change"],["imageInput",""],["for","newPost",1,"custom-file-label"],[1,"row","mt-2"],[1,"col"],["class","text-center",4,"ngIf"],[1,"col-6"],["mat-raised-button","","color","primary","type","submit"],[4,"ngFor","ngForOf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"text-center"],["alt","Image preview",2,"min-width","300px","max-width","600px",3,"src"],[3,"photo","createComment"]],template:function(t,e){if(1&t&&(i.Tb(0,"mat-card"),i.Tb(1,"form",0),i.bc("ngSubmit",(function(){return e.onSubmit()})),i.Tb(2,"mat-card-content"),i.Tb(3,"div",1),i.Tb(4,"div",2),i.Tb(5,"h3"),i.yc(6,"Create a new post"),i.Sb(),i.Tb(7,"div"),i.Tb(8,"mat-form-field"),i.Tb(9,"mat-label"),i.yc(10,"Photo description"),i.Sb(),i.Ob(11,"textarea",3),i.Sb(),i.Sb(),i.Tb(12,"div"),i.Tb(13,"mat-form-field"),i.Tb(14,"mat-chip-list",4,5),i.xc(16,C,3,4,"mat-chip",6),i.Tb(17,"input",7),i.bc("matChipInputTokenEnd",(function(t){return e.add(t)})),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(18,"div",8),i.Tb(19,"input",9,10),i.bc("change",(function(t){return e.fileProgress(t)})),i.Sb(),i.Tb(21,"label",11),i.yc(22,"Choose a picture"),i.Sb(),i.Sb(),i.Tb(23,"div",12),i.Tb(24,"div",13),i.Tb(25,"div"),i.xc(26,y,2,1,"div",14),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(27,"mat-card-footer"),i.Tb(28,"div",1),i.Tb(29,"div",15),i.Tb(30,"button",16),i.yc(31,"Post"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.xc(32,w,2,1,"div",17)),2&t){const t=i.pc(15);i.Bb(1),i.kc("formGroup",e.form),i.Bb(10),i.kc("formControl",e.form.get("description")),i.Bb(5),i.kc("ngForOf",e.tags),i.Bb(1),i.kc("matChipInputFor",t)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",e.addOnBlur),i.Bb(9),i.kc("ngIf",e.previewUrl),i.Bb(6),i.kc("ngForOf",e.photos)}},directives:[h.a,u.p,u.k,u.e,h.b,p.b,p.e,f.b,u.b,u.j,u.d,d.c,c.j,d.b,c.k,h.c,v.a,d.a,g.a,d.d,S.a],styles:[""]}),t})(),P=(()=>{class t{constructor(t){this.store=t,this.photos$=this.store.select(n.c)}createComment(t){this.store.dispatch(n.b.actions.createComment(t))}createPhoto(t){this.store.dispatch(n.b.actions.createPhoto({photo:t}))}}return t.\u0275fac=function(e){return new(e||t)(i.Nb(a.h))},t.\u0275cmp=i.Hb({type:t,selectors:[["napho-home-container"]],decls:2,vars:3,consts:[[3,"photos","createComment","formSubmit"]],template:function(t,e){1&t&&(i.Tb(0,"napho-home",0),i.bc("createComment",(function(t){return e.createComment(t)}))("formSubmit",(function(t){return e.createPhoto(t)})),i.gc(1,"async"),i.Sb()),2&t&&i.kc("photos",i.hc(1,1,e.photos$))},directives:[k],pipes:[c.b],styles:[""]}),t})();var O=o("R7+U"),F=o("mFH5");function B(t,e){if(1&t&&(i.Tb(0,"mat-option",6),i.yc(1),i.Sb()),2&t){const t=e.$implicit;i.kc("value",t.value),i.Bb(1),i.Ac(" ",t.label," ")}}function I(t,e){if(1&t&&(i.Tb(0,"div",15),i.Ob(1,"img",16),i.Sb()),2&t){const t=i.fc().$implicit;i.Bb(1),i.kc("src",t.profileImgUrl,i.sc)}}function x(t,e){if(1&t&&(i.Tb(0,"div",15),i.Ob(1,"img",16),i.Sb()),2&t){const t=i.fc(2);i.Bb(1),i.kc("src",t.defaultPicturePath,i.sc)}}const $=function(t){return["../..","profile",t]};function j(t,e){if(1&t&&(i.Tb(0,"div",7),i.Tb(1,"div",8),i.Tb(2,"mat-card",9),i.Tb(3,"mat-card-content"),i.Tb(4,"div",7),i.xc(5,I,2,1,"div",10),i.xc(6,x,2,1,"div",10),i.Tb(7,"div",11),i.Tb(8,"h3"),i.yc(9),i.Sb(),i.Sb(),i.Tb(10,"div",12),i.Tb(11,"button",13),i.Tb(12,"span",14),i.yc(13,"View Profile"),i.Sb(),i.Tb(14,"mat-icon"),i.yc(15,"person"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb()),2&t){const t=e.$implicit;i.Bb(5),i.kc("ngIf",t.profileImgUrl),i.Bb(1),i.kc("ngIf",!t.profileImgUrl),i.Bb(3),i.zc(t.username),i.Bb(2),i.kc("routerLink",i.mc(4,$,t.id))}}function U(t,e){if(1&t){const t=i.Ub();i.Tb(0,"div"),i.Tb(1,"napho-photo-post-container",17),i.bc("createComment",(function(e){return i.rc(t),i.fc().createComment.emit(e)})),i.Sb(),i.Sb()}if(2&t){const t=e.$implicit;i.Bb(1),i.kc("photo",t)}}let A=(()=>{class t{constructor(){this.createComment=new i.n,this.valueChange=new i.n,this.filterOptions=[{label:"Most recent",value:"date"},{label:"Most favorites",value:"favoriteOf"},{label:"Most comments",value:"comments"}],this.defaultPicturePath="assets/img/blank-profile.png"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Hb({type:t,selectors:[["napho-search-results"]],inputs:{users:"users",photos:"photos"},outputs:{createComment:"createComment",valueChange:"valueChange"},decls:19,vars:3,consts:[[1,"row","mt-2","d-flex","justify-content-center"],[1,"col-6"],[3,"valueChange"],[3,"value",4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"row"],[1,"col"],[1,"mt-0"],["class","col-1",4,"ngIf"],[1,"ml-3","col-7"],[1,"col-3","d-flex","justify-content-end"],["mat-button","",3,"routerLink"],[1,"d-none","d-lg-inline"],[1,"col-1"],["alt","Profile image",1,"profile",3,"src"],[3,"photo","createComment"]],template:function(t,e){1&t&&(i.Tb(0,"div",0),i.Tb(1,"div",1),i.Tb(2,"mat-form-field"),i.Tb(3,"mat-label"),i.yc(4,"Filter"),i.Sb(),i.Tb(5,"mat-select",2),i.bc("valueChange",(function(t){return e.valueChange.emit(t)})),i.xc(6,B,2,2,"mat-option",3),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(7,"div"),i.Tb(8,"mat-card"),i.Tb(9,"mat-card-content"),i.Tb(10,"h1"),i.yc(11,"Users"),i.Sb(),i.Sb(),i.Sb(),i.xc(12,j,16,6,"div",4),i.Sb(),i.Tb(13,"div"),i.Tb(14,"mat-card"),i.Tb(15,"mat-card-content"),i.Tb(16,"h1"),i.yc(17,"Photo posts"),i.Sb(),i.Sb(),i.Sb(),i.xc(18,U,2,1,"div",5),i.Sb()),2&t&&(i.Bb(6),i.kc("ngForOf",e.filterOptions),i.Bb(6),i.kc("ngForOf",e.users),i.Bb(6),i.kc("ngForOf",e.photos))},directives:[p.b,p.e,O.a,c.j,h.a,h.b,F.k,c.k,v.a,s.b,g.a,S.a],styles:[".profile[_ngcontent-%COMP%]{border-radius:50%!important;min-width:auto!important;height:30px;width:30px;border:2px solid #44443b;border-radius:50%}"]}),t})(),L=(()=>{class t{constructor(t){this.store=t,this.photos$=this.store.select(n.d),this.users$=this.store.select(n.f),this.search$=this.store.select(n.e)}createComment(t){this.store.dispatch(n.b.actions.createComment(t))}sortSearchPhotos(t){this.search$.subscribe(e=>this.store.dispatch(n.b.actions.getSearchPhotos({search:e,field:t})))}}return t.\u0275fac=function(e){return new(e||t)(i.Nb(a.h))},t.\u0275cmp=i.Hb({type:t,selectors:[["napho-search-results-container"]],decls:3,vars:6,consts:[[3,"users","photos","valueChange","createComment"]],template:function(t,e){1&t&&(i.Tb(0,"napho-search-results",0),i.bc("valueChange",(function(t){return e.sortSearchPhotos(t)}))("createComment",(function(t){return e.createComment(t)})),i.gc(1,"async"),i.gc(2,"async"),i.Sb()),2&t&&i.kc("users",i.hc(1,2,e.users$))("photos",i.hc(2,4,e.photos$))},directives:[A],pipes:[c.b],styles:[""]}),t})();var M=o("ycWL"),H=o("J+dc");let K=(()=>{class t{constructor(t,e){this.store=t,this.actions$=e}resolve(){return this.store.dispatch(n.b.actions.getFeedPhotos()),this.actions$.pipe(Object(M.d)(n.b.actions.getFeedPhotosSuccess),Object(H.a)(1))}}return t.\u0275fac=function(e){return new(e||t)(i.Xb(a.h),i.Xb(M.a))},t.\u0275prov=i.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var N=o("P4Xx");const X=[{path:"feed",component:P,resolve:{resolvedPhotos:K}},{path:"search-results",component:L,resolve:{resolvedPhotos:(()=>{class t{constructor(t){this.actions$=t}resolve(){const t=this.actions$.pipe(Object(M.d)(n.b.actions.getSearchPhotosSuccess),Object(H.a)(1)),e=this.actions$.pipe(Object(M.d)(n.b.actions.getSearchUsers),Object(H.a)(1));return Object(N.a)([t,e])}}return t.\u0275fac=function(e){return new(e||t)(i.Xb(M.a))},t.\u0275prov=i.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}},{path:"",redirectTo:"feed",pathMatch:"full"}];let D=(()=>{class t{}return t.\u0275mod=i.Lb({type:t}),t.\u0275inj=i.Kb({factory:function(e){return new(e||t)},imports:[[s.d.forChild(X)],s.d]}),t})();var E=o("4zk1");let J=(()=>{class t{}return t.\u0275mod=i.Lb({type:t}),t.\u0275inj=i.Kb({factory:function(e){return new(e||t)},imports:[[a.j.forFeature("feed",n.b.reducer),M.b.forFeature([n.a]),c.c,r.a,D,E.a]]}),t})()}}]);