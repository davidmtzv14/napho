function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var o,r=_getPrototypeOf(t);if(e){var n=_getPrototypeOf(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{xQww:function(t,e,o){"use strict";o.r(e),o.d(e,"FeedModule",(function(){return q}));var r=o("2kYt"),n=o("PCNd"),c=o("sEIs"),i=o("8bSv"),a=o("EM62"),s=o("sN6X"),l=o("fAiE"),u=o("h9PC"),b=o("VIHj"),f=o("nIj0"),p=(o("kYBX"),o("Meci")),h=o("29Wa"),m=o("Cd2c"),d=o("S17y"),v=o("PBFl"),g=o("bFHC"),C=o("dLA+");function y(t,e){1&t&&(a.Tb(0,"mat-icon",20),a.yc(1,"cancel"),a.Sb())}function S(t,e){if(1&t){var o=a.Ub();a.Tb(0,"mat-chip",18),a.bc("removed",(function(){a.rc(o);var t=e.$implicit;return a.fc().remove(t)})),a.yc(1),a.xc(2,y,2,0,"mat-icon",19),a.Sb()}if(2&t){var r=e.$implicit,n=a.fc();a.kc("selectable",n.selectable)("removable",n.removable),a.Bb(1),a.Ac(" ",r," "),a.Bb(1),a.kc("ngIf",n.removable)}}function T(t,e){if(1&t&&(a.Tb(0,"div",21),a.Ob(1,"img",22),a.Sb()),2&t){var o=a.fc();a.Bb(1),a.kc("src",o.previewUrl,a.sc)}}function k(t,e){if(1&t){var o=a.Ub();a.Tb(0,"div"),a.Tb(1,"napho-photo-post-container",23),a.bc("createComment",(function(t){return a.rc(o),a.fc().createComment.emit(t)})),a.Sb(),a.Sb()}if(2&t){var r=e.$implicit;a.Bb(1),a.kc("photo",r)}}var w,O,P=((O=function(t){_inherits(o,t);var e=_createSuper(o);function o(t,r){var n;return _classCallCheck(this,o),(n=e.call(this,t)).formService=t,n.fb=r,n.createComment=new a.n,n.fileData=null,n.previewUrl=null,n.fileUploadProgress=null,n.uploadedFilePath=null,n.visible=!0,n.selectable=!0,n.removable=!0,n.addOnBlur=!0,n.separatorKeysCodes=[l.g,l.c],n.tags=[],n.form=n.fb.group({description:[null],tags:[null],imageUrl:[null,f.o.required]}),n}return _createClass(o,[{key:"add",value:function(t){var e=t.input,o=t.value;(o||"").trim()&&this.tags.push(o.trim()),e&&(e.value="")}},{key:"remove",value:function(t){var e=this.tags.indexOf(t);e>=0&&this.tags.splice(e,1)}},{key:"fileProgress",value:function(t){this.fileData=t.target.files[0],this.preview()}},{key:"preview",value:function(){var t=this;if(null!=this.fileData.type.match(/image\/*/)){var e=new FileReader;e.readAsDataURL(this.fileData),e.onload=function(o){t.form.get("imageUrl").patchValue(e.result),t.previewUrl=e.result}}}},{key:"onSubmit",value:function(){this.form.get("tags").patchValue(this.tags),this.submit()}}]),o}(u.a)).\u0275fac=function(t){return new(t||O)(a.Nb(b.a),a.Nb(f.c))},O.\u0275cmp=a.Hb({type:O,selectors:[["napho-home"]],inputs:{photos:"photos"},outputs:{createComment:"createComment"},features:[a.yb],decls:33,vars:8,consts:[[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],["matInput","",3,"formControl"],["aria-label","Tags"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Add tags...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[1,"custom-file"],["type","file","name","image","accept","image/*","id","newPost",1,"custom-file-input",3,"change"],["imageInput",""],["for","newPost",1,"custom-file-label"],[1,"row","mt-2"],[1,"col"],["class","text-center",4,"ngIf"],[1,"col-6"],["mat-raised-button","","color","primary","type","submit"],[4,"ngFor","ngForOf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"text-center"],["alt","Image preview",2,"min-width","300px","max-width","600px",3,"src"],[3,"photo","createComment"]],template:function(t,e){if(1&t&&(a.Tb(0,"mat-card"),a.Tb(1,"form",0),a.bc("ngSubmit",(function(){return e.onSubmit()})),a.Tb(2,"mat-card-content"),a.Tb(3,"div",1),a.Tb(4,"div",2),a.Tb(5,"h3"),a.yc(6,"Create a new post"),a.Sb(),a.Tb(7,"div"),a.Tb(8,"mat-form-field"),a.Tb(9,"mat-label"),a.yc(10,"Photo description"),a.Sb(),a.Ob(11,"textarea",3),a.Sb(),a.Sb(),a.Tb(12,"div"),a.Tb(13,"mat-form-field"),a.Tb(14,"mat-chip-list",4,5),a.xc(16,S,3,4,"mat-chip",6),a.Tb(17,"input",7),a.bc("matChipInputTokenEnd",(function(t){return e.add(t)})),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(18,"div",8),a.Tb(19,"input",9,10),a.bc("change",(function(t){return e.fileProgress(t)})),a.Sb(),a.Tb(21,"label",11),a.yc(22,"Choose a picture"),a.Sb(),a.Sb(),a.Tb(23,"div",12),a.Tb(24,"div",13),a.Tb(25,"div"),a.xc(26,T,2,1,"div",14),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(27,"mat-card-footer"),a.Tb(28,"div",1),a.Tb(29,"div",15),a.Tb(30,"button",16),a.yc(31,"Post"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.xc(32,k,2,1,"div",17)),2&t){var o=a.pc(15);a.Bb(1),a.kc("formGroup",e.form),a.Bb(10),a.kc("formControl",e.form.get("description")),a.Bb(5),a.kc("ngForOf",e.tags),a.Bb(1),a.kc("matChipInputFor",o)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",e.addOnBlur),a.Bb(9),a.kc("ngIf",e.previewUrl),a.Bb(6),a.kc("ngForOf",e.photos)}},directives:[p.a,f.p,f.k,f.e,p.b,h.b,h.e,m.b,f.b,f.j,f.d,d.c,r.j,d.b,r.k,p.c,v.a,d.a,g.a,d.d,C.a],styles:[""]}),O),_=((w=function(){function t(e){_classCallCheck(this,t),this.store=e,this.photos$=this.store.select(i.c)}return _createClass(t,[{key:"createComment",value:function(t){this.store.dispatch(i.b.actions.createComment(t))}},{key:"createPhoto",value:function(t){this.store.dispatch(i.b.actions.createPhoto({photo:t}))}}]),t}()).\u0275fac=function(t){return new(t||w)(a.Nb(s.h))},w.\u0275cmp=a.Hb({type:w,selectors:[["napho-home-container"]],decls:2,vars:3,consts:[[3,"photos","createComment","formSubmit"]],template:function(t,e){1&t&&(a.Tb(0,"napho-home",0),a.bc("createComment",(function(t){return e.createComment(t)}))("formSubmit",(function(t){return e.createPhoto(t)})),a.gc(1,"async"),a.Sb()),2&t&&a.kc("photos",a.hc(1,1,e.photos$))},directives:[P],pipes:[r.b],styles:[""]}),w),F=o("R7+U"),I=o("mFH5");function B(t,e){if(1&t&&(a.Tb(0,"mat-option",6),a.yc(1),a.Sb()),2&t){var o=e.$implicit;a.kc("value",o.value),a.Bb(1),a.Ac(" ",o.label," ")}}function x(t,e){if(1&t&&(a.Tb(0,"div",15),a.Ob(1,"img",16),a.Sb()),2&t){var o=a.fc().$implicit;a.Bb(1),a.kc("src",o.profileImgUrl,a.sc)}}function j(t,e){if(1&t&&(a.Tb(0,"div",15),a.Ob(1,"img",16),a.Sb()),2&t){var o=a.fc(2);a.Bb(1),a.kc("src",o.defaultPicturePath,a.sc)}}var $=function(t){return["../..","profile",t]};function U(t,e){if(1&t&&(a.Tb(0,"div",7),a.Tb(1,"div",8),a.Tb(2,"mat-card",9),a.Tb(3,"mat-card-content"),a.Tb(4,"div",7),a.xc(5,x,2,1,"div",10),a.xc(6,j,2,1,"div",10),a.Tb(7,"div",11),a.Tb(8,"h3"),a.yc(9),a.Sb(),a.Sb(),a.Tb(10,"div",12),a.Tb(11,"button",13),a.Tb(12,"span",14),a.yc(13,"View Profile"),a.Sb(),a.Tb(14,"mat-icon"),a.yc(15,"person"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&t){var o=e.$implicit;a.Bb(5),a.kc("ngIf",o.profileImgUrl),a.Bb(1),a.kc("ngIf",!o.profileImgUrl),a.Bb(3),a.zc(o.username),a.Bb(2),a.kc("routerLink",a.mc(4,$,o.id))}}function R(t,e){if(1&t){var o=a.Ub();a.Tb(0,"div"),a.Tb(1,"napho-photo-post-container",17),a.bc("createComment",(function(t){return a.rc(o),a.fc().createComment.emit(t)})),a.Sb(),a.Sb()}if(2&t){var r=e.$implicit;a.Bb(1),a.kc("photo",r)}}var A,E,L,M,N,D,H=((E=function t(){_classCallCheck(this,t),this.createComment=new a.n,this.valueChange=new a.n,this.filterOptions=[{label:"Most recent",value:"date"},{label:"Most favorites",value:"favoriteOf"},{label:"Most comments",value:"comments"}],this.defaultPicturePath="assets/img/blank-profile.png"}).\u0275fac=function(t){return new(t||E)},E.\u0275cmp=a.Hb({type:E,selectors:[["napho-search-results"]],inputs:{users:"users",photos:"photos"},outputs:{createComment:"createComment",valueChange:"valueChange"},decls:19,vars:3,consts:[[1,"row","mt-2","d-flex","justify-content-center"],[1,"col-6"],[3,"valueChange"],[3,"value",4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"row"],[1,"col"],[1,"mt-0"],["class","col-1",4,"ngIf"],[1,"ml-3","col-7"],[1,"col-3","d-flex","justify-content-end"],["mat-button","",3,"routerLink"],[1,"d-none","d-lg-inline"],[1,"col-1"],["alt","Profile image",1,"profile",3,"src"],[3,"photo","createComment"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"mat-form-field"),a.Tb(3,"mat-label"),a.yc(4,"Filter"),a.Sb(),a.Tb(5,"mat-select",2),a.bc("valueChange",(function(t){return e.valueChange.emit(t)})),a.xc(6,B,2,2,"mat-option",3),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(7,"div"),a.Tb(8,"mat-card"),a.Tb(9,"mat-card-content"),a.Tb(10,"h1"),a.yc(11,"Users"),a.Sb(),a.Sb(),a.Sb(),a.xc(12,U,16,6,"div",4),a.Sb(),a.Tb(13,"div"),a.Tb(14,"mat-card"),a.Tb(15,"mat-card-content"),a.Tb(16,"h1"),a.yc(17,"Photo posts"),a.Sb(),a.Sb(),a.Sb(),a.xc(18,R,2,1,"div",5),a.Sb()),2&t&&(a.Bb(6),a.kc("ngForOf",e.filterOptions),a.Bb(6),a.kc("ngForOf",e.users),a.Bb(6),a.kc("ngForOf",e.photos))},directives:[h.b,h.e,F.a,r.j,p.a,p.b,I.k,r.k,v.a,c.b,g.a,C.a],styles:[".profile[_ngcontent-%COMP%]{border-radius:50%!important;min-width:auto!important;height:30px;width:30px;border:2px solid #44443b;border-radius:50%}"]}),E),K=((A=function(){function t(e){_classCallCheck(this,t),this.store=e,this.photos$=this.store.select(i.d),this.users$=this.store.select(i.f),this.search$=this.store.select(i.e)}return _createClass(t,[{key:"createComment",value:function(t){this.store.dispatch(i.b.actions.createComment(t))}},{key:"sortSearchPhotos",value:function(t){var e=this;this.search$.subscribe((function(o){return e.store.dispatch(i.b.actions.getSearchPhotos({search:o,field:t}))}))}}]),t}()).\u0275fac=function(t){return new(t||A)(a.Nb(s.h))},A.\u0275cmp=a.Hb({type:A,selectors:[["napho-search-results-container"]],decls:3,vars:6,consts:[[3,"users","photos","valueChange","createComment"]],template:function(t,e){1&t&&(a.Tb(0,"napho-search-results",0),a.bc("valueChange",(function(t){return e.sortSearchPhotos(t)}))("createComment",(function(t){return e.createComment(t)})),a.gc(1,"async"),a.gc(2,"async"),a.Sb()),2&t&&a.kc("users",a.hc(1,2,e.users$))("photos",a.hc(2,4,e.photos$))},directives:[H],pipes:[r.b],styles:[""]}),A),X=o("ycWL"),J=o("J+dc"),z=((L=function(){function t(e,o){_classCallCheck(this,t),this.store=e,this.actions$=o}return _createClass(t,[{key:"resolve",value:function(){return this.store.dispatch(i.b.actions.getFeedPhotos()),this.actions$.pipe(Object(X.d)(i.b.actions.getFeedPhotosSuccess),Object(J.a)(1))}}]),t}()).\u0275fac=function(t){return new(t||L)(a.Xb(s.h),a.Xb(X.a))},L.\u0275prov=a.Jb({token:L,factory:L.\u0275fac,providedIn:"root"}),L),V=o("P4Xx"),G=[{path:"feed",component:_,resolve:{resolvedPhotos:z}},{path:"search-results",component:K,resolve:{resolvedPhotos:(M=function(){function t(e){_classCallCheck(this,t),this.actions$=e}return _createClass(t,[{key:"resolve",value:function(){var t=this.actions$.pipe(Object(X.d)(i.b.actions.getSearchPhotosSuccess),Object(J.a)(1)),e=this.actions$.pipe(Object(X.d)(i.b.actions.getSearchUsers),Object(J.a)(1));return Object(V.a)([t,e])}}]),t}(),M.\u0275fac=function(t){return new(t||M)(a.Xb(X.a))},M.\u0275prov=a.Jb({token:M,factory:M.\u0275fac,providedIn:"root"}),M)}},{path:"",redirectTo:"feed",pathMatch:"full"}],W=((N=function t(){_classCallCheck(this,t)}).\u0275mod=a.Lb({type:N}),N.\u0275inj=a.Kb({factory:function(t){return new(t||N)},imports:[[c.d.forChild(G)],c.d]}),N),Y=o("4zk1"),q=((D=function t(){_classCallCheck(this,t)}).\u0275mod=a.Lb({type:D}),D.\u0275inj=a.Kb({factory:function(t){return new(t||D)},imports:[[s.j.forFeature("feed",i.b.reducer),X.b.forFeature([i.a]),r.c,n.a,W,Y.a]]}),D)}}]);