(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"4zk1":function(t,o,e){"use strict";e.d(o,"a",(function(){return a}));var n=e("2kYt"),c=e("PCNd"),i=e("sN6X"),s=e("8bSv"),r=e("ycWL"),b=e("EM62");let a=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(o){return new(o||t)},imports:[[i.j.forFeature("feed",s.b.reducer),r.b.forFeature([s.a]),c.a,n.c]]}),t})()},"dLA+":function(t,o,e){"use strict";e.d(o,"a",(function(){return P}));var n=e("EM62"),c=e("W8dB"),i=e("8bSv"),s=e("sN6X"),r=e("kYBX"),b=e("VIHj"),a=e("nIj0"),m=e("h9PC"),u=e("Meci"),h=e("2kYt"),p=e("PBFl"),d=e("bFHC"),f=e("S17y"),l=e("29Wa"),S=e("Cd2c");function g(t,o){if(1&t&&(n.Tb(0,"div",17),n.Ob(1,"img",18),n.Sb()),2&t){const t=n.fc();n.Bb(1),n.kc("src",t.photo.user.profileImgUrl,n.sc)}}function v(t,o){if(1&t&&(n.Tb(0,"div",17),n.Ob(1,"img",18),n.Sb()),2&t){const t=n.fc();n.Bb(1),n.kc("src",t.defaultPicturePath,n.sc)}}function T(t,o){if(1&t){const t=n.Ub();n.Tb(0,"span"),n.Tb(1,"button",19),n.bc("click",(function(){return n.rc(t),n.fc().toggleFavorite()})),n.Tb(2,"mat-icon"),n.yc(3,"favorite"),n.Sb(),n.yc(4,"Unfavorite "),n.Sb(),n.Sb()}}function C(t,o){if(1&t){const t=n.Ub();n.Tb(0,"span"),n.Tb(1,"button",19),n.bc("click",(function(){return n.rc(t),n.fc().toggleFavorite()})),n.Tb(2,"mat-icon"),n.yc(3,"favorite_border"),n.Sb(),n.yc(4,"Favorite "),n.Sb(),n.Sb()}}function k(t,o){if(1&t&&(n.Tb(0,"span"),n.Tb(1,"mat-chip"),n.yc(2),n.Sb(),n.Sb()),2&t){const t=o.$implicit;n.Bb(2),n.zc(t.content)}}function w(t,o){if(1&t&&(n.Tb(0,"div",0),n.Tb(1,"div",20),n.Tb(2,"mat-form-field"),n.Tb(3,"mat-label"),n.yc(4,"Add a comment"),n.Sb(),n.Ob(5,"textarea",21),n.Sb(),n.Sb(),n.Tb(6,"div",22),n.Tb(7,"button",23),n.Tb(8,"mat-icon"),n.yc(9,"send"),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&t){const t=n.fc();n.Bb(5),n.kc("formControl",t.form.get("content"))}}function y(t,o){if(1&t){const t=n.Ub();n.Tb(0,"span"),n.Tb(1,"button",28),n.bc("click",(function(){n.rc(t);const o=n.fc().$implicit,e=n.fc(2);return e.changeCommentStatus(o.id,e.approvedStatus)})),n.Tb(2,"mat-icon"),n.yc(3,"check"),n.Sb(),n.Sb(),n.Tb(4,"button",28),n.bc("click",(function(){n.rc(t);const o=n.fc().$implicit,e=n.fc(2);return e.changeCommentStatus(o.id,e.rejectedStatus)})),n.Tb(5,"mat-icon"),n.yc(6,"cancel"),n.Sb(),n.Sb(),n.Sb()}}function B(t,o){if(1&t&&(n.Tb(0,"div",26),n.Tb(1,"div",27),n.Tb(2,"strong"),n.yc(3),n.Sb(),n.yc(4),n.xc(5,y,7,0,"span",9),n.Sb(),n.Sb()),2&t){const t=o.$implicit,e=n.fc(2);n.Bb(3),n.Ac("",null==t?null:t.username," "),n.Bb(1),n.Ac(" ",t.content," "),n.Bb(1),n.kc("ngIf",e.photo.user.id===e.user.id&&t.status===e.pendingStatus)}}function F(t,o){if(1&t&&(n.Tb(0,"mat-card-footer"),n.Tb(1,"h6",24),n.yc(2,"Comments"),n.Sb(),n.xc(3,B,6,3,"div",25),n.Sb()),2&t){const t=n.fc();n.Bb(3),n.kc("ngForOf",t.photo.comments)}}let I=(()=>{class t extends m.a{constructor(t,o){super(t),this.formService=t,this.fb=o,this.updateCommentStatus=new n.n,this.updatePhotoFavorite=new n.n,this.defaultPicturePath="assets/img/blank-profile.png",this.showComment=!1,this.showComments=!1,this.pendingStatus=r.a.pending,this.approvedStatus=r.a.approved,this.rejectedStatus=r.a.rejected,this.form=this.fb.group({photoId:[null,a.o.required],content:[null,a.o.required]})}ngOnChanges(t){t.photo&&this.photo&&this.photo.comments&&(this.photo=Object.assign(Object.assign({},this.photo),{comments:this.photo.comments.filter(t=>{if(t.status===this.approvedStatus||t.status===this.pendingStatus&&this.photo.user.id===this.user.id)return t})}))}changeShowComment(){this.showComment=!this.showComment}changeShowComments(){this.showComments=!this.showComments}changeCommentStatus(t,o){let e;this.photo=Object.assign(Object.assign({},this.photo),{comments:this.photo.comments.map(n=>n.id===t?(n=Object.assign(Object.assign({},n),{status:o}),e=n.photoId,n):n)}),this.updateCommentStatus.emit({id:t,status:o,photoId:e})}toggleFavorite(){this.photo.favorite=!this.photo.favorite,this.updatePhotoFavorite.emit(this.photo.id)}onSubmit(){this.form.get("photoId").patchValue(this.photo.id),this.submit()}}return t.\u0275fac=function(o){return new(o||t)(n.Nb(b.a),n.Nb(a.c))},t.\u0275cmp=n.Hb({type:t,selectors:[["napho-photo-post"]],inputs:{photo:"photo",user:"user"},outputs:{updateCommentStatus:"updateCommentStatus",updatePhotoFavorite:"updatePhotoFavorite"},features:[n.yb,n.zb],decls:36,vars:13,consts:[[1,"row"],[1,"col"],["class","col-2",4,"ngIf"],[1,"ml-3","col-6"],[1,"mt-2"],[1,"border","text-center"],["alt","Photo Post",1,"img-fluid",3,"src"],[1,"border","row","mt-1"],[1,"col-lg-3","col-6"],[4,"ngIf"],["mat-button","",3,"click"],[1,"row","mt-1"],[3,"click"],[4,"ngFor","ngForOf"],[1,"mt-1"],[3,"formGroup","ngSubmit"],["class","row",4,"ngIf"],[1,"col-2"],["alt","Profile image",1,"profile",3,"src"],["mat-button","","color","primary",3,"click"],[1,"col-11"],["matInput","",3,"formControl"],[1,"col-1"],["mat-icon-button","","type","submit"],[1,"m-0"],["class","row m-0",4,"ngFor","ngForOf"],[1,"row","m-0"],[1,"col","p-0"],["mat-icon-button","",3,"click"]],template:function(t,o){1&t&&(n.Tb(0,"div",0),n.Tb(1,"div",1),n.Tb(2,"mat-card"),n.Tb(3,"mat-card-header"),n.Tb(4,"div",0),n.xc(5,g,2,1,"div",2),n.xc(6,v,2,1,"div",2),n.Tb(7,"div",3),n.Tb(8,"h3"),n.yc(9),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(10,"mat-card-content",4),n.Tb(11,"div",5),n.Ob(12,"img",6),n.Sb(),n.Tb(13,"div",7),n.Tb(14,"div",8),n.xc(15,T,5,0,"span",9),n.xc(16,C,5,0,"span",9),n.Sb(),n.Tb(17,"div",8),n.Tb(18,"button",10),n.bc("click",(function(){return o.changeShowComment()})),n.Tb(19,"mat-icon"),n.yc(20,"comment"),n.Sb(),n.yc(21," Comment "),n.Sb(),n.Sb(),n.Sb(),n.Tb(22,"div",11),n.Tb(23,"div",8),n.Tb(24,"div"),n.yc(25),n.Sb(),n.Sb(),n.Tb(26,"div",8),n.Tb(27,"div",12),n.bc("click",(function(){return o.changeShowComments()})),n.yc(28),n.Sb(),n.Sb(),n.Sb(),n.Tb(29,"mat-chip-list",4),n.xc(30,k,3,1,"span",13),n.Sb(),n.Tb(31,"div",14),n.yc(32),n.Sb(),n.Tb(33,"form",15),n.bc("ngSubmit",(function(){return o.onSubmit()})),n.xc(34,w,10,1,"div",16),n.Sb(),n.Sb(),n.xc(35,F,4,1,"mat-card-footer",9),n.Sb(),n.Sb(),n.Sb()),2&t&&(n.Bb(5),n.kc("ngIf",o.photo.user.profileImgUrl),n.Bb(1),n.kc("ngIf",!o.photo.user.profileImgUrl),n.Bb(3),n.zc(o.photo.user.username),n.Bb(3),n.kc("src",o.photo.imageUrl,n.sc),n.Bb(3),n.kc("ngIf",o.photo.favorite),n.Bb(1),n.kc("ngIf",!o.photo.favorite),n.Bb(9),n.Ac(" ",null==o.photo.favoriteOf?null:o.photo.favoriteOf.length," Favs "),n.Bb(3),n.Ac(" ",null==o.photo.comments?null:o.photo.comments.length," Comments "),n.Bb(2),n.kc("ngForOf",o.photo.tags),n.Bb(2),n.Ac(" ",o.photo.description," "),n.Bb(1),n.kc("formGroup",o.form),n.Bb(1),n.kc("ngIf",o.showComment),n.Bb(1),n.kc("ngIf",o.showComments))},directives:[u.a,u.d,h.k,u.b,p.a,d.a,f.c,h.j,a.p,a.k,a.e,f.a,l.b,l.e,S.b,a.b,a.j,a.d,u.c],styles:[".profile[_ngcontent-%COMP%]{border-radius:50%!important;min-width:auto!important;height:30px;width:30px;border:2px solid #44443b;border-radius:50%}"]}),t})(),P=(()=>{class t{constructor(t){this.store=t,this.createComment=new n.n,this.user$=this.store.select(c.c)}updateCommentStatus(t){this.store.dispatch(i.b.actions.updateCommentStatus({comment:t}))}updatePhotoFavorite(t){this.store.dispatch(i.b.actions.updatePhotoFavorite({id:t}))}}return t.\u0275fac=function(o){return new(o||t)(n.Nb(s.h))},t.\u0275cmp=n.Hb({type:t,selectors:[["napho-photo-post-container"]],inputs:{photo:"photo"},outputs:{createComment:"createComment"},decls:2,vars:4,consts:[[3,"photo","user","updateCommentStatus","updatePhotoFavorite","formSubmit"]],template:function(t,o){1&t&&(n.Tb(0,"napho-photo-post",0),n.bc("updateCommentStatus",(function(t){return o.updateCommentStatus(t)}))("updatePhotoFavorite",(function(t){return o.updatePhotoFavorite(t)}))("formSubmit",(function(t){return o.createComment.emit(t)})),n.gc(1,"async"),n.Sb()),2&t&&n.kc("photo",o.photo)("user",n.hc(1,2,o.user$))},directives:[I],pipes:[h.b],styles:[""]}),t})()}}]);